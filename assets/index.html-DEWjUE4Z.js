import{_ as t,c as a,a as n,b as i,o as e}from"./app-RmE5kr10.js";const h={};function l(d,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h2 id="ğŸ“˜-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#ğŸ“˜-æ¦‚è¿°"><span>ğŸ“˜ æ¦‚è¿°</span></a></h2><p><code>QA_Merger</code> æ˜¯ä¸€ä¸ªç”¨äºåˆå¹¶é¢˜ç›®ä¸ç­”æ¡ˆçš„åå¤„ç†ç®—å­ã€‚å®ƒé€šå¸¸æ¥æ”¶æ¥è‡ª <code>LLMOutputParser</code> çš„ä¸¤ä¸ªç‹¬ç«‹è¾“å‡ºï¼ˆä¸€ä¸ªæ˜¯æå–çš„é¢˜ç›®åˆ—è¡¨ï¼Œå¦ä¸€ä¸ªæ˜¯æå–çš„ç­”æ¡ˆåˆ—è¡¨ï¼‰ï¼Œå¹¶å°†å®ƒä»¬æŒ‰ç…§ç« èŠ‚æ ‡é¢˜å’Œé¢˜ç›®åºå·åŒ¹é…åˆå¹¶ä¸ºå®Œæ•´çš„é—®ç­”å¯¹ï¼ˆQA Pairsï¼‰ã€‚</p><h3 id="ä¸»è¦åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#ä¸»è¦åŠŸèƒ½"><span>ä¸»è¦åŠŸèƒ½ï¼š</span></a></h3><ul><li><strong>åŒå‘åˆå¹¶</strong>ï¼šæ ¹æ®ç« èŠ‚æ ‡é¢˜æˆ–åºå·é€»è¾‘ï¼Œå°†é¢˜ç›®ã€ç­”æ¡ˆã€è§£é¢˜æ­¥éª¤å’Œæ ‡ç­¾ç»„åˆåœ¨ä¸€èµ·ã€‚</li><li><strong>æ ¼å¼è½¬æ¢</strong>ï¼šå°†åˆå¹¶åçš„ <code>.jsonl</code> æ•°æ®è‡ªåŠ¨è½¬æ¢ä¸ºæ˜“äºé˜…è¯»çš„ <code>.md</code>ï¼ˆMarkdownï¼‰æ ¼å¼ã€‚</li><li><strong>æ•°æ®å¹³é“ºï¼ˆExplodeï¼‰</strong>ï¼šå°†åŸæœ¬æŒ‰æ–‡ä»¶ç»„ç»‡çš„ DataFrame è¡Œï¼ŒæŒ‰ QA å¯¹è¿›è¡Œæ‹†åˆ†ã€‚åŸæœ¬ä¸€ä¸ªæ–‡ä»¶å ä¸€è¡Œï¼Œæ‰§è¡Œåæ¯ä¸ª QA å¯¹å°†å æ®ä¸€è¡Œï¼Œæ–¹ä¾¿åç»­ç»†ç²’åº¦çš„å¤„ç†ã€‚</li></ul><h2 id="init-å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#init-å‡½æ•°"><span><code>__init__</code> å‡½æ•°</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">def</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> __init__</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> output_dir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> strict_title_match</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> bool</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> False</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="init-å‚æ•°è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#init-å‚æ•°è¯´æ˜"><span>init å‚æ•°è¯´æ˜</span></a></h3><table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>output_dir</strong></td><td>str</td><td>å¿…éœ€</td><td>åˆå¹¶åæ–‡ä»¶çš„è¾“å‡ºæ ¹ç›®å½•ã€‚</td></tr><tr><td><strong>strict_title_match</strong></td><td>bool</td><td>False</td><td>æ˜¯å¦å¼€å¯ä¸¥æ ¼æ ‡é¢˜åŒ¹é…ã€‚è‹¥ä¸º Trueï¼Œåˆ™åˆå¹¶æ—¶ä¼šä¸¥æ ¼æ ¡éªŒç« èŠ‚æ ‡é¢˜ã€‚è‹¥ä¸ºFalseï¼Œæ ¡éªŒå‰ä¼šå°è¯•ä»æ ‡é¢˜ä¸­æå–<strong>ä¸­æ–‡/è‹±æ–‡åºå·</strong></td></tr></tbody></table><h2 id="run-å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#run-å‡½æ•°"><span><code>run</code> å‡½æ•°</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">def</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> DataFlowStorage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        input_question_qalist_path_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        input_answer_qalist_path_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        input_name_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        output_merged_qalist_path_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        output_merged_md_path_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        output_qa_item_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> str</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">qa_item</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        )</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œåˆå¹¶é€»è¾‘ï¼šè¯»å–é¢˜ç›®å’Œç­”æ¡ˆçš„ JSONL æ–‡ä»¶ï¼Œè°ƒç”¨å†…ç½®å·¥å…·å‡½æ•°åˆå¹¶ï¼Œå¹¶æ›´æ–°å­˜å‚¨ã€‚</p><h4 id="å‚æ•°è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è¯´æ˜"><span>å‚æ•°è¯´æ˜</span></a></h4><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>storage</strong></td><td>DataFlowStorage</td><td>å¿…éœ€</td><td>æ•°æ®æµå­˜å‚¨å®ä¾‹ã€‚</td></tr><tr><td><strong>input_question_qalist_path_key</strong></td><td>str</td><td>å¿…éœ€</td><td>é¢˜ç›® JSONL æ–‡ä»¶çš„è·¯å¾„åˆ—åã€‚</td></tr><tr><td><strong>input_answer_qalist_path_key</strong></td><td>str</td><td>å¿…éœ€</td><td>ç­”æ¡ˆ JSONL æ–‡ä»¶çš„è·¯å¾„åˆ—åã€‚</td></tr><tr><td><strong>input_name_key</strong></td><td>str</td><td>å¿…éœ€</td><td>ä»»åŠ¡åç§°åˆ—åï¼Œç”¨äºåˆ›å»ºè¾“å‡ºå­ç›®å½•ã€‚</td></tr><tr><td><strong>output_merged_qalist_path_key</strong></td><td>str</td><td>å¿…éœ€</td><td>åˆå¹¶å JSONL æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„åˆ—åã€‚</td></tr><tr><td><strong>output_merged_md_path_key</strong></td><td>str</td><td>å¿…éœ€</td><td>åˆå¹¶å Markdown æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„åˆ—åã€‚</td></tr><tr><td><strong>output_qa_item_key</strong></td><td>str</td><td>&quot;qa_item&quot;</td><td><strong>å…³é”®å‚æ•°</strong>ï¼šå±•å¼€åçš„ QA å†…å®¹å­˜å‚¨åˆ—åã€‚æ¯è¡Œå°†åŒ…å«ä¸€ä¸ªå…·ä½“çš„é—®ç­”å¯¹å­—å…¸ã€‚</td></tr></tbody></table><h2 id="ğŸ§ -æ ¸å¿ƒé€»è¾‘-æ•°æ®å±•å¼€-explode" tabindex="-1"><a class="header-anchor" href="#ğŸ§ -æ ¸å¿ƒé€»è¾‘-æ•°æ®å±•å¼€-explode"><span>ğŸ§  æ ¸å¿ƒé€»è¾‘ï¼šæ•°æ®å±•å¼€ (Explode)</span></a></h2><p>ä¸å…¶ä»–ç®—å­ä¸åŒï¼Œ<code>QA_Merger</code> ä¼šæ”¹å˜ DataFrame çš„è¡Œæ•°ã€‚</p><ol><li><strong>åˆå¹¶æ–‡ä»¶</strong>ï¼šå®ƒé¦–å…ˆåœ¨ç£ç›˜ä¸Šç”Ÿæˆä¸€ä¸ª <code>merged_qa_pairs.jsonl</code>ï¼Œè¯¥æ–‡ä»¶åŒ…å«è¯¥æ–‡æ¡£çš„æ‰€æœ‰é—®ç­”å¯¹ã€‚</li><li><strong>å­˜å‚¨å¯¹è±¡</strong>ï¼šå°†è¿™äº›é—®ç­”å¯¹ä»¥ <code>list</code> å½¢å¼è¯»å…¥ <code>output_qa_item_key</code> åˆ—ã€‚</li><li><strong>æ‰§è¡Œ Explode</strong>ï¼šè°ƒç”¨ <code>dataframe.explode()</code>ã€‚</li></ol><ul><li><strong>å¤„ç†å‰</strong>ï¼š2 è¡Œè®°å½•ï¼ˆå¯¹åº” 2 ä¸ª PDF æ–‡ä»¶ï¼Œå„åŒ…å« 10ï¼Œ5 ä¸ª QA å¯¹ï¼‰ã€‚</li><li><strong>å¤„ç†å</strong>ï¼š15 è¡Œè®°å½•ï¼ˆæ¯è¡Œå¯¹åº” 1 ä¸ªå…·ä½“çš„ QA å¯¹ï¼Œå…¶ä»–åˆ—æ•°æ®å¦‚ <code>input_name</code> ä¼šè‡ªåŠ¨å¤åˆ¶å¡«å……ï¼‰ã€‚</li></ul><h2 id="ğŸ§ -ç¤ºä¾‹ç»“æœ" tabindex="-1"><a class="header-anchor" href="#ğŸ§ -ç¤ºä¾‹ç»“æœ"><span>ğŸ§  ç¤ºä¾‹ç»“æœ</span></a></h2><h4 id="ğŸ§¾-markdown-è¾“å‡ºç¤ºä¾‹-merged-qa-pairs-md" tabindex="-1"><a class="header-anchor" href="#ğŸ§¾-markdown-è¾“å‡ºç¤ºä¾‹-merged-qa-pairs-md"><span>ğŸ§¾ Markdown è¾“å‡ºç¤ºä¾‹ (<code>merged_qa_pairs.md</code>)</span></a></h4><div class="language-markdown line-numbers-mode" data-highlighter="shiki" data-ext="markdown" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-markdown"><span class="line"><span style="--shiki-light:#999999;--shiki-light-font-weight:bold;--shiki-dark:#666666;--shiki-dark-font-weight:bold;">#</span><span style="--shiki-light:#1C6B48;--shiki-light-font-weight:bold;--shiki-dark:#4D9375;--shiki-dark-font-weight:bold;"> Chapter: ç¬¬ä¸€ç«  å¯¼è®º</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-light-font-weight:bold;--shiki-dark:#666666;--shiki-dark-font-weight:bold;">**</span><span style="--shiki-light:#393A34;--shiki-light-font-weight:bold;--shiki-dark:#DBD7CAEE;--shiki-dark-font-weight:bold;">Question 1</span><span style="--shiki-light:#999999;--shiki-light-font-weight:bold;--shiki-dark:#666666;--shiki-dark-font-weight:bold;">**</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: ä»€ä¹ˆæ˜¯æ•°æ®æµç³»ç»Ÿï¼Ÿ</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-light-font-weight:bold;--shiki-dark:#666666;--shiki-dark-font-weight:bold;">**</span><span style="--shiki-light:#393A34;--shiki-light-font-weight:bold;--shiki-dark:#DBD7CAEE;--shiki-dark-font-weight:bold;">Answer</span><span style="--shiki-light:#999999;--shiki-light-font-weight:bold;--shiki-dark:#666666;--shiki-dark-font-weight:bold;">**</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: ä¸€ç§...</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-light-font-weight:bold;--shiki-dark:#666666;--shiki-dark-font-weight:bold;">**</span><span style="--shiki-light:#393A34;--shiki-light-font-weight:bold;--shiki-dark:#DBD7CAEE;--shiki-dark-font-weight:bold;">Solution</span><span style="--shiki-light:#999999;--shiki-light-font-weight:bold;--shiki-dark:#666666;--shiki-dark-font-weight:bold;">**</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: æ•°æ®æµç³»ç»Ÿæ˜¯ä¸€ç§...</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-light-font-weight:bold;--shiki-dark:#666666;--shiki-dark-font-weight:bold;">**</span><span style="--shiki-light:#393A34;--shiki-light-font-weight:bold;--shiki-dark:#DBD7CAEE;--shiki-dark-font-weight:bold;">Label</span><span style="--shiki-light:#999999;--shiki-light-font-weight:bold;--shiki-dark:#666666;--shiki-dark-font-weight:bold;">**</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1C6B48;--shiki-light-font-weight:bold;--shiki-dark:#4D9375;--shiki-dark-font-weight:bold;">---</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-light-font-weight:bold;--shiki-dark:#666666;--shiki-dark-font-weight:bold;">**</span><span style="--shiki-light:#393A34;--shiki-light-font-weight:bold;--shiki-dark:#DBD7CAEE;--shiki-dark-font-weight:bold;">Question 2</span><span style="--shiki-light:#999999;--shiki-light-font-weight:bold;--shiki-dark:#666666;--shiki-dark-font-weight:bold;">**</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">: </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">](</span><span style="--shiki-light:#393A3490;--shiki-light-text-decoration:underline;--shiki-dark:#DEDCD590;--shiki-dark-text-decoration:underline;">images/fig2.png</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> è¯·æè¿°æ­¤å›¾ã€‚</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ğŸ§¾-dataframe-å±•å¼€ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ğŸ§¾-dataframe-å±•å¼€ç¤ºä¾‹"><span>ğŸ§¾ DataFrame å±•å¼€ç¤ºä¾‹</span></a></h4>`,21),i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"index"),i("th",null,"name"),i("th",null,"qa_item (åˆ—)")])]),i("tbody",null,[i("tr",null,[i("td",null,"0"),i("td",null,"task_01"),i("td",{"question:":"","Q1...,":"","answer:":"","A1...,":"","css-module":"."})]),i("tr",null,[i("td",null,"1"),i("td",null,"task_01"),i("td",{"question:":"","Q2...,":"","answer:":"","A2...,":"","css-module":"."})]),i("tr",null,[i("td",null,"2"),i("td",null,"task_02"),i("td",{"question:":"","Q1...,":"","answer:":"","A1...,":"","css-module":"."})])])],-1)]))}const k=t(h,[["render",l]]),p=JSON.parse('{"path":"/zh/api/operators/pdf2vqa/generate/qamerger/","title":"QA_Merger","lang":"zh-CN","frontmatter":{"title":"QA_Merger","createTime":"2026/01/20 20:25:00","permalink":"/zh/api/operators/pdf2vqa/generate/qamerger/"},"readingTime":{"minutes":2.38,"words":713},"git":{"createdTime":1769148661000,"updatedTime":1772028428000,"contributors":[{"name":"fatty-belly","username":"fatty-belly","email":"134311924+fatty-belly@users.noreply.github.com","commits":2,"avatar":"https://avatars.githubusercontent.com/fatty-belly?v=4","url":"https://github.com/fatty-belly"}]},"filePathRelative":"zh/notes/api/operators/pdf2vqa/generate/QAMerger.md","headers":[]}');export{k as comp,p as data};
