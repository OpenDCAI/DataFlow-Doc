import{_ as i,c as a,a as n,o as e}from"./app-RmE5kr10.js";const l={};function t(h,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h2 id="_1-概述" tabindex="-1"><a class="header-anchor" href="#_1-概述"><span>1. 概述</span></a></h2><p>代码流水线旨在处理不同来源和用途的代码数据，包括预训练代码语料、指令微调数据以及通用代码生成数据集。根据功能，可以划分为三类：</p><ol><li><strong>预训练代码数据过滤流水线</strong>：对原始预训练代码进行启发式和统计特征过滤，去除自动生成、质量较差或类型不符合预期的代码，得到高质量预训练代码语料。</li><li><strong>代码 SFT 数据合成流水线</strong>：以现有代码为种子，反向生成自然语言指令，再根据指令生成代码，并结合质量评估和沙盒执行，构建适用于代码指令微调的指令-代码对数据。</li><li><strong>代码生成数据集合成流水线</strong>：以对话消息或模板为输入，增强生成高质量指令，再合成对应代码，并通过质量打分和沙盒执行筛选高质量「指令 + 代码」样本，构建代码生成任务的数据集。</li></ol><p>这些流水线都遵循「<strong>统一的数据存储 + 可组合算子</strong>」设计：</p><ul><li><strong>统一存储 (<code>FileStorage</code>)</strong>：所有中间结果都写入缓存文件，便于断点续跑和调试。</li><li><strong>算子解耦</strong>：每一步都是一个独立的 <code>Operator</code>，你可以增删、重排、替换。</li><li><strong>多场景覆盖</strong>： <ul><li>预训练代码语料清洗（CPU，无需大模型）</li><li>基于 API 的代码指令-代码对合成</li><li>面向代码生成任务的指令 &amp; 代码增强</li></ul></li></ul><p>下文将分别介绍三条流水线的输入格式、主要算子以及核心逻辑。</p><h2 id="_2-快速开始" tabindex="-1"><a class="header-anchor" href="#_2-快速开始"><span>2. 快速开始</span></a></h2><h3 id="第一步-安装-dataflow-环境" tabindex="-1"><a class="header-anchor" href="#第一步-安装-dataflow-环境"><span>第一步：安装 dataflow 环境</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> open-dataflow</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="第二步-创建新的-dataflow-工作文件夹" tabindex="-1"><a class="header-anchor" href="#第二步-创建新的-dataflow-工作文件夹"><span>第二步：创建新的 dataflow 工作文件夹</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run_dataflow</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run_dataflow</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="第三步-初始化-dataflow" tabindex="-1"><a class="header-anchor" href="#第三步-初始化-dataflow"><span>第三步：初始化 DataFlow</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dataflow</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> init</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>初始化后，<code>run_dataflow</code> 目录下会生成示例流水线文件（路径略有不同，以下为与本说明对应的三个示例）：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-text"><span class="line"><span>run_dataflow/pipelines/api_pipelines/code_gen_dataset_pipeline.py</span></span>
<span class="line"><span>run_dataflow/pipelines/api_pipelines/code_code_to_sft_data_pipeline.py</span></span>
<span class="line"><span>run_dataflow/pipelines/cpu_pipelines/code_pt_filter.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="第四步-配置-api-key-以及-llm-serving-仅-api-流水线需要" tabindex="-1"><a class="header-anchor" href="#第四步-配置-api-key-以及-llm-serving-仅-api-流水线需要"><span>第四步：配置 API Key 以及 LLM Serving（仅 API 流水线需要）</span></a></h3><p>对于 Linux 和 macOS：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">export</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> DF_API_KEY</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sk-xxxxx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>对于 Windows（PowerShell）：</p><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">$</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">env:</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">DF_API_KEY</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sk-xxxxx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在代码类 API 流水线中，通常会使用如下方式构造 <code>APILLMServing_request</code>：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">llm_serving </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> APILLMServing_request</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    api_url</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://api.openai.com/v1/chat/completions</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    model_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">gpt-4o</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    max_workers</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 或 100，视具体流水线而定</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="第五步-运行示例流水线" tabindex="-1"><a class="header-anchor" href="#第五步-运行示例流水线"><span>第五步：运行示例流水线</span></a></h3><p>在 <code>run_dataflow</code> 目录下，你可以按需运行任意一条流水线：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 1) 预训练代码过滤（CPU）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">python</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pipelines/cpu_pipelines/code_pt_filter.py</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 2) 从代码合成 SFT 指令-代码对</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">python</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pipelines/api_pipelines/code_code_to_sft_data_pipeline.py</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 3) 从原始对话 / 模板生成代码数据集</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">python</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pipelines/api_pipelines/code_gen_dataset_pipeline.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-数据流与流水线逻辑" tabindex="-1"><a class="header-anchor" href="#_3-数据流与流水线逻辑"><span>3. 数据流与流水线逻辑</span></a></h2><h3 id="_3-1-通用输入与-filestorage" tabindex="-1"><a class="header-anchor" href="#_3-1-通用输入与-filestorage"><span>3.1 通用输入与 FileStorage</span></a></h3><p>三条流水线都使用 <code>FileStorage</code> 来管理输入与缓存数据，只是默认输入文件不同：</p><ul><li><strong>PTCodeFilter_CPUPipeline</strong><ul><li><code>first_entry_file_name=&quot;../example_data/CodePipeline/code_input.jsonl&quot;</code></li></ul></li><li><strong>CodeSFTSynthesis_APIPipeline</strong><ul><li><code>first_entry_file_name=&quot;../example_data/CodePipeline/code_synthesis_input.jsonl&quot;</code></li></ul></li><li><strong>CodeGenDataset_APIPipeline</strong><ul><li><code>first_entry_file_name=&quot;../example_data/CodePipeline/raw_code.jsonl&quot;</code></li></ul></li></ul><p>在实际项目中，你只需将这些示例路径替换为自己的 JSON/JSONL 文件路径即可，无需修改算子调用方式。</p><hr><h3 id="_3-2-预训练代码过滤流水线-ptcodefilter-cpupipeline" tabindex="-1"><a class="header-anchor" href="#_3-2-预训练代码过滤流水线-ptcodefilter-cpupipeline"><span>3.2 预训练代码过滤流水线：<code>PTCodeFilter_CPUPipeline</code></span></a></h3><p>该流水线位于 <code>pipelines/cpu_pipelines/code_pt_filter.py</code>，主要用于<strong>在不依赖大模型的情况下，对大规模代码语料进行多维度过滤与质量评估</strong>。<br> 默认输入文件中通常包含以下字段：</p><ul><li><strong><code>lines</code></strong>：按行拆分后的代码列表，用于行级和长度相关过滤。</li><li><strong><code>text</code></strong>：完整的代码文本，用于文本组成、编码数据检测和文档质量评估。</li><li><strong><code>dataframe</code></strong>：包含文件路径、语言类型等结构化信息，用于文件类型过滤。</li></ul><p>流水线中主要算子及其作用如下：</p><ol><li><p><strong>自动生成代码过滤：<code>CodeAutoGeneratedFilter</code></strong></p><ul><li><strong>参数</strong>：<code>min_score=1.0, max_score=1.0</code></li><li><strong>输入</strong>：<code>lines</code></li><li><strong>输出键</strong>：<code>autogen_filter_label</code></li><li><strong>功能</strong>：识别并过滤带有明显自动生成痕迹的代码（如大段模板化注释、生成器标记等）。</li></ul></li><li><p><strong>代码长度过滤：<code>CodeLengthSampleFilter</code></strong></p><ul><li><strong>参数</strong>：<code>min_score=1.0, max_score=1.0</code></li><li><strong>输入</strong>：<code>lines</code></li><li><strong>输出键</strong>：<code>length_filter_label</code></li><li><strong>功能</strong>：根据行数、字符数等长度信息过滤异常短/长的样本。</li></ul></li><li><p><strong>文本组成过滤：<code>CodeTextCompositionFilter</code></strong></p><ul><li><strong>参数</strong>：<code>min_score=1.0, max_score=1.0</code></li><li><strong>输入</strong>：<code>text</code></li><li><strong>输出键</strong>：<code>text_composition_filter_label</code></li><li><strong>功能</strong>：过滤文本组成异常的样本，例如非代码字符比例过高等。</li></ul></li><li><p><strong>编码数据过滤：<code>CodeEncodedDataFilter</code></strong></p><ul><li><strong>参数</strong>：<code>min_score=1.0, max_score=1.0</code></li><li><strong>输入</strong>：<code>text</code></li><li><strong>输出键</strong>：<code>encoded_data_filter_label</code></li><li><strong>功能</strong>：识别并过滤包含大量编码数据（如 Base64、大块十六进制字符串等）的样本。</li></ul></li><li><p><strong>文档质量过滤：<code>CodeDocumentQualityFilter</code></strong></p><ul><li><strong>参数</strong>：<code>min_score=1.0, max_score=1.0</code></li><li><strong>阈值配置</strong>： <ul><li><code>min_num_chars=100</code>, <code>max_num_chars=100000</code></li><li><code>min_num_words=10</code>, <code>max_num_words=50000</code></li><li><code>max_frac_duplicate_lines=0.3</code></li><li><code>max_frac_duplicate_2gram~5gram=0.3</code></li><li><code>max_frac_curly_bracket=0.1</code></li><li><code>max_frac_all_caps_words=0.3</code></li><li><code>min_entropy_unigram=2.0</code></li></ul></li><li><strong>输入</strong>：<code>text</code></li><li><strong>输出键</strong>：<code>doc_quality_filter_label</code></li><li><strong>功能</strong>：综合考虑长度、重复度、熵等指标，过滤整体质量较差的代码文档。</li></ul></li><li><p><strong>文件类型内容过滤：<code>CodeFileTypeContentFilter</code></strong></p><ul><li><strong>输入</strong>：<code>dataframe</code></li><li><strong>输出键</strong>：<code>file_type_filter_label</code></li><li><strong>功能</strong>：基于文件扩展名、语法特征等信息过滤不感兴趣或不符合预期类型的文件。</li></ul></li><li><p><strong>通用分数过滤（可选）：<code>CodeGenericScoreFilter</code></strong></p><ul><li>在示例代码中默认被注释掉，你可以将多路过滤分数汇总到某个字段（如 <code>quality_score</code>），再通过该算子做统一阈值过滤。</li></ul></li></ol><hr><h3 id="_3-3-代码-sft-合成流水线-codesftsynthesis-apipipeline" tabindex="-1"><a class="header-anchor" href="#_3-3-代码-sft-合成流水线-codesftsynthesis-apipipeline"><span>3.3 代码 SFT 合成流水线：<code>CodeSFTSynthesis_APIPipeline</code></span></a></h3><p>该流水线位于 <code>pipelines/api_pipelines/code_code_to_sft_data_pipeline.py</code>，目标是<strong>从已有代码出发，自动合成高质量的指令-代码对数据集</strong>，适用于代码指令微调（Code SFT）场景。</p><h4 id="_3-3-1-输入与存储" tabindex="-1"><a class="header-anchor" href="#_3-3-1-输入与存储"><span>3.3.1 输入与存储</span></a></h4><ul><li>默认输入文件：<code>../example_data/CodePipeline/code_synthesis_input.jsonl</code></li><li>典型字段： <ul><li><strong><code>raw_code</code></strong>：原始代码片段，是整个流水线的核心输入。</li></ul></li></ul><p><code>FileStorage</code> 会将每一步的输出缓存为中间文件，方便断点调试与增量运行。</p><h4 id="_3-3-2-主要算子与数据流" tabindex="-1"><a class="header-anchor" href="#_3-3-2-主要算子与数据流"><span>3.3.2 主要算子与数据流</span></a></h4><ol><li><p><strong>Code → Instruction：<code>CodeCodeToInstructionGenerator</code></strong></p><ul><li><strong>输入</strong>：<code>raw_code</code></li><li><strong>输出键</strong>：<code>generated_instruction</code></li><li><strong>功能</strong>：使用 LLM 从代码反向生成自然语言指令/任务描述，使得指令与代码强相关、可用于人类可读的 SFT 数据。</li></ul></li><li><p><strong>Instruction → Code：<code>CodeInstructionToCodeGenerator</code></strong></p><ul><li><strong>输入</strong>：<code>generated_instruction</code></li><li><strong>输出键</strong>：<code>generated_code</code></li><li><strong>功能</strong>：根据生成的指令重新生成代码，用于校验指令是否充分、明确，并产生一对（指令，代码）。</li></ul></li><li><p><strong>质量评估：<code>CodeQualitySampleEvaluator</code></strong></p><ul><li><strong>输入</strong>：<code>generated_instruction</code> 与 <code>generated_code</code></li><li><strong>功能</strong>：使用 LLM 评估指令与代码的一致性、清晰程度以及可执行性，生成质量分数和反馈信息。</li></ul></li><li><p><strong>分数过滤：<code>CodeQualityScoreFilter</code></strong></p><ul><li><strong>参数</strong>：<code>min_score=0.0</code>, <code>max_score=10.0</code></li><li><strong>输入</strong>：<code>generated_instruction</code>, <code>generated_code</code></li><li><strong>输出键</strong>：<code>quality_score_filter_label</code></li><li><strong>功能</strong>：基于质量评估结果对样本进行打标或筛选，去除明显低质量样本。</li></ul></li><li><p><strong>沙盒执行评估：<code>CodeSandboxSampleEvaluator</code></strong></p><ul><li><strong>参数</strong>：<code>language=&#39;python&#39;</code></li><li><strong>输入</strong>：<code>generated_code</code></li><li><strong>功能</strong>：在隔离环境中尝试执行代码，检查是否存在语法错误或明显运行时问题，为后续进一步筛选提供依据。</li></ul></li></ol><hr><h3 id="_3-4-代码生成数据集流水线-codegendataset-apipipeline" tabindex="-1"><a class="header-anchor" href="#_3-4-代码生成数据集流水线-codegendataset-apipipeline"><span>3.4 代码生成数据集流水线：<code>CodeGenDataset_APIPipeline</code></span></a></h3><p>该流水线位于 <code>pipelines/api_pipelines/code_gen_dataset_pipeline.py</code>，更偏向<strong>从原始对话 / 模板消息出发，增强指令并生成高质量代码数据集</strong>。</p><h4 id="_3-4-1-输入与存储" tabindex="-1"><a class="header-anchor" href="#_3-4-1-输入与存储"><span>3.4.1 输入与存储</span></a></h4><ul><li>默认输入文件：<code>../example_data/CodePipeline/raw_code.jsonl</code></li><li>典型字段： <ul><li><strong><code>input</code></strong>：原始指令或粗粒度任务说明，用于生成更高质量的指令。</li></ul></li></ul><h4 id="_3-4-2-主要算子与数据流" tabindex="-1"><a class="header-anchor" href="#_3-4-2-主要算子与数据流"><span>3.4.2 主要算子与数据流</span></a></h4><ol><li><p><strong>指令增强：<code>CodeEnhancementInstructionGenerator</code></strong></p><ul><li><strong>输入</strong>：<code>input</code></li><li><strong>输出键</strong>：<code>generated_instruction</code></li><li><strong>功能</strong>：基于粗粒度输入（如聊天记录、简短提示），生成结构化、清晰、可直接用于 CodeGen 任务的高质量指令。</li></ul></li><li><p><strong>Instruction → Code：<code>CodeInstructionToCodeGenerator</code></strong></p><ul><li><strong>输入</strong>：<code>generated_instruction</code></li><li><strong>输出键</strong>：<code>generated_code</code></li><li><strong>功能</strong>：根据指令生成对应代码，实现「指令 + 代码」样本对。</li></ul></li><li><p><strong>质量评估：<code>CodeQualitySampleEvaluator</code></strong></p><ul><li><strong>输入</strong>：<code>generated_instruction</code>, <code>generated_code</code></li><li><strong>功能</strong>：评估指令与代码的一致性、完整性和合理性。</li></ul></li><li><p><strong>高分样本过滤：<code>CodeQualityScoreFilter</code></strong></p><ul><li><strong>参数</strong>：<code>min_score=7.0</code>, <code>max_score=10.0</code></li><li><strong>输入</strong>：<code>generated_instruction</code>, <code>generated_code</code></li><li><strong>输出键</strong>： <ul><li><code>quality_score</code>：质量分数</li><li><code>quality_feedback</code>：来自 LLM 的文字反馈</li><li><code>quality_score_filter_label</code>：是否通过过滤的标记</li></ul></li><li><strong>功能</strong>：仅保留质量分数较高的样本，便于直接作为训练/评测数据使用。</li></ul></li><li><p><strong>沙盒执行评估：<code>CodeSandboxSampleEvaluator</code></strong></p><ul><li><strong>参数</strong>：<code>language=&#39;python&#39;</code></li><li><strong>输入</strong>：<code>generated_code</code></li><li><strong>功能</strong>：验证生成代码在语法和简单运行层面的可行性。</li></ul></li></ol><h2 id="_4-流水线示例代码" tabindex="-1"><a class="header-anchor" href="#_4-流水线示例代码"><span>4. 流水线示例代码</span></a></h2><p>下面给出示例代码，演示如何使用多个算子进行代码数据处理。该示例展示了如何初始化一个代码数据处理流水线，并且顺序执行各个过滤和清理步骤。</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">class</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> CodeSFTSynthesis_APIPipeline</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    def</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> __init__</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> llm_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> LLMServingABC </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> None</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> None</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> FileStorage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            first_entry_file_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">../example_data/CodePipeline/code_synthesis_input.jsonl</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            cache_path</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">./cache</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            file_name_prefix</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">dataflow_cache_step</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            cache_type</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">jsonl</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">llm_serving </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> llm_serving </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">or</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> APILLMServing_request</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            api_url</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://api.openai.com/v1/chat/completions</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            model_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">gpt-4o</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            max_workers</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">100</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">instruction_synthesizer_step1 </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> CodeCodeToInstructionGenerator</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">llm_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">llm_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">code_generator_step2 </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> CodeInstructionToCodeGenerator</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">llm_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">llm_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">pair_evaluator_step3 </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> CodeQualitySampleEvaluator</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">llm_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">llm_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">score_filter_step4 </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> CodeQualityScoreFilter</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            llm_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">llm_serving</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> min_score</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> max_score</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10.0</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        )</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">sandbox_evaluator_step5 </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> CodeSandboxSampleEvaluator</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">language</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">python</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    def</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> forward</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">instruction_synthesizer_step1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">raw_code</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">generated_instruction</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        )</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">code_generator_step2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">generated_instruction</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">generated_code</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        )</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">pair_evaluator_step3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            input_instruction_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">generated_instruction</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            input_code_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">generated_code</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        )</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">score_filter_step4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            input_instruction_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">generated_instruction</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            input_code_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">generated_code</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            output_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">quality_score_filter_label</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        )</span></span>
<span class="line"><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">        self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">sandbox_evaluator_step5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">self</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">storage</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">step</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">            input_key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">generated_code</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> __name__</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ==</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">__main__</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    pl </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> CodeSFTSynthesis_APIPipeline</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    pl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">forward</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,54)]))}const k=i(l,[["render",t]]),d=JSON.parse('{"path":"/zh/guide/i987k1eh/","title":"代码数据合成流水线","lang":"zh-CN","frontmatter":{"title":"代码数据合成流水线","icon":"mdi:code-braces","createTime":"2025/11/23 17:03:49","permalink":"/zh/guide/i987k1eh/"},"readingTime":{"minutes":7.33,"words":2198},"git":{"createdTime":1764138615000,"updatedTime":1768461853000,"contributors":[{"name":"J1zz","username":"J1zz","email":"122658249+J1zz@users.noreply.github.com","commits":2,"avatar":"https://avatars.githubusercontent.com/J1zz?v=4","url":"https://github.com/J1zz"},{"name":"Sunnyhaze","username":"Sunnyhaze","email":"mxch1122@126.com","commits":1,"avatar":"https://avatars.githubusercontent.com/Sunnyhaze?v=4","url":"https://github.com/Sunnyhaze"}]},"filePathRelative":"zh/notes/guide/pipelines/CodePipeline.md","headers":[]}');export{k as comp,d as data};
