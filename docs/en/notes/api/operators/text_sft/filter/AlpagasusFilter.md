---
title: AlpagasusFilter
createTime: 2025/10/09 16:52:48
permalink: /en/api/operators/text_sft/filter/alpagasusfilter/
---

## ðŸ“˜ Overview
[AlpagasusFilter]() is an operator designed to filter data based on scores generated by the `AlpagasusSampleEvaluator`. It leverages a Large Language Model (LLM) to assess the quality (or another specified dimension) of an instruction-following sample and retains only those samples that fall within a specified score range.

## `__init__`
```python
def __init__(self, min_score=3, max_score=5, llm_serving: LLMServingABC = None, dimension='quality')
```
| Parameter | Type | Default | Description |
| :-- | :--- | :--- | :--- |
| **min_score** | int | 3 | The minimum score threshold for a sample to be kept. |
| **max_score** | int | 5 | The maximum score threshold for a sample to be kept. |
| **llm_serving** | LLMServingABC | None | The Large Language Model serving instance used for scoring. |
| **dimension** | str | 'quality' | The evaluation dimension for scoring (e.g., 'quality', 'relevance'). |

### Prompt Template Descriptions
| Prompt Template Name | Primary Use | Applicable Scenarios | Feature Description |
| --- | --- | --- | --- |
| | | | |

## `run`
```python
def run(self, storage: DataFlowStorage, input_instruction_key: str, input_input_key: str, input_output_key: str, output_key: str='AlpagasusScore')
```
| Parameter | Type | Default | Description |
| :--- | :--- | :--- | :--- |
| **storage** | DataFlowStorage | Required | The DataFlow storage instance for reading and writing data. |
| **input_instruction_key** | str | Required | The column name for the instruction field. |
| **input_input_key** | str | Required | The column name for the input field. |
| **input_output_key** | str | Required | The column name for the output field. |
| **output_key** | str | 'AlpagasusScore' | The column name where the generated score will be stored. |

## ðŸ§  Example Usage
```python

```

#### ðŸ§¾ Output Format
The operator appends a new column (specified by `output_key`) containing the generated score to the input DataFrame and filters the rows based on `min_score` and `max_score`.

| Field | Type | Description |
| :--- | :--- | :--- |
| *input_fields* | - | All original fields from the input data are preserved. |
| AlpagasusScore | int | The quality score generated by the LLM, by default. |

**Example Input:**
```json
{
"instruction":"Translate the following English sentence to French: 'Hello, how are you?'",
"input":"",
"output":"Bonjour, comment Ã§a va ?"
}
```
**Example Output (if it passes the filter):**
```json
{
"instruction":"Translate the following English sentence to French: 'Hello, how are you?'",
"input":"",
"output":"Bonjour, comment Ã§a va ?",
"AlpagasusScore": 5
}
```
